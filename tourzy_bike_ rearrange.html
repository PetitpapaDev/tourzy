<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    
    <style>html, body {width: 100%; height: 100%; margin: 0; padding: 0;}</style>
    <style>#map {position:absolute; top:0; bottom:0; right:0; left:0;}</style>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
            
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <style>
        #map {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }

        #updated {
            width: 100%;
            text-align: center;
            position: fixed;
            top: 0%;
            padding-top: 10px;
            padding-bottom: 10px;

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            color: #000000;
            background: #FF7500;

            z-index: 9999;
        }

        #copied {
            width: 300px;
            height: 50px;
            text-align: center;
            position: fixed;
            bottom: 10%;
            left: 50%;
            transform: translate(-50%, 0%);

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            line-height: 50px;
            color: #000000;
            background: #FF7500;
            border-radius: 10px;

            z-index: 9999;
        }
    </style>
        
</head>

<script>

    var map
    var tile_layer
    var marker
    var icon
    var popup
    var html

    var tourzy_bike = 

        [{"car":"TZ0265","lock":"잠김","fuel":84,"lock_fuel":98,"lat":35.1454476160667,"lng":129.066392394334,"lastest":45126.65107638889,"address":"대한민국 부산광역시 국제금융센터(부산은행역)","ble":1044,"modem":2043},{"car":"TZ0063","lock":"잠김","fuel":72,"lock_fuel":98,"lat":35.1480910194015,"lng":129.066104245653,"lastest":45126.640706018516,"address":"대한민국 부산광역시 남구 문현동 704-4","ble":1044,"modem":2043},{"car":"TZ0016","lock":"잠김","fuel":80,"lock_fuel":98,"lat":35.1455215499517,"lng":129.066576235441,"lastest":45126.61740740741,"address":"대한민국 부산광역시 남구 문현동 728-10","ble":1044,"modem":2043},{"car":"TZ0062","lock":"잠김","fuel":81,"lock_fuel":98,"lat":35.1455443812454,"lng":129.066458581763,"lastest":45126.6547337963,"address":"대한민국 부산광역시 남구 문현동 728-10","ble":1044,"modem":2043},{"car":"TZ0437","lock":"잠김","fuel":82,"lock_fuel":98,"lat":35.145518365315,"lng":129.066491783104,"lastest":45126.65408564815,"address":"대한민국 부산광역시 남구 문현동 728-10","ble":1044,"modem":2043},{"car":"TZ0438","lock":"잠김","fuel":82,"lock_fuel":98,"lat":35.1456060440109,"lng":129.066544276062,"lastest":45126.65400462963,"address":"대한민국 부산광역시 남구 문현동 728-10","ble":1044,"modem":2043},{"car":"TZ0473","lock":"잠김","fuel":82,"lock_fuel":97,"lat":35.1455540121411,"lng":129.066610678776,"lastest":45126.65398148148,"address":"대한민국 부산광역시 남구 문현동 728-10","ble":1044,"modem":2043},{"car":"TZ0029","lock":"잠김","fuel":70,"lock_fuel":97,"lat":35.1451014807656,"lng":129.066138640414,"lastest":45126.656122685185,"address":"대한민국 부산광역시 남구 문현동 728-11","ble":1044,"modem":2043},{"car":"TZ0192","lock":"잠김","fuel":75,"lock_fuel":98,"lat":35.1451073055949,"lng":129.066169142524,"lastest":45126.656331018516,"address":"대한민국 부산광역시 남구 문현동 728-11","ble":1044,"modem":2043},{"car":"TZ0304","lock":"잠김","fuel":75,"lock_fuel":97,"lat":35.145085,"lng":129.066186,"lastest":45126.65678240741,"address":"대한민국 부산광역시 남구 문현동 728-11","ble":1044,"modem":2043},{"car":"TZ0048","lock":"잠김","fuel":80,"lock_fuel":97,"lat":35.1464495022234,"lng":129.066454177249,"lastest":45126.649097222224,"address":"대한민국 부산광역시 남구 문현동 728-12","ble":1044,"modem":2043},{"car":"TZ0128","lock":"잠김","fuel":87,"lock_fuel":98,"lat":35.1464300098727,"lng":129.066453763261,"lastest":45126.64685185185,"address":"대한민국 부산광역시 남구 문현동 728-12","ble":1044,"modem":2043},{"car":"TZ0441","lock":"잠김","fuel":86,"lock_fuel":98,"lat":35.1456301183297,"lng":129.066500907308,"lastest":45126.65738425926,"address":"대한민국 부산광역시 남구 문현동 729-29","ble":1044,"modem":2043},{"car":"TZ0414","lock":"잠김","fuel":87,"lock_fuel":98,"lat":35.1447392516521,"lng":129.064817931199,"lastest":45126.65547453704,"address":"대한민국 부산광역시 남구 문현동 734-19","ble":1044,"modem":2043},{"car":"TZ0022","lock":"잠김","fuel":80,"lock_fuel":97,"lat":35.1457446698392,"lng":129.067100784975,"lastest":45126.61655092592,"address":"대한민국 부산광역시 남구 전포대로 98-7","ble":1044,"modem":2043},{"car":"TZ0432","lock":"잠김","fuel":83,"lock_fuel":98,"lat":35.144824990277,"lng":129.064860256039,"lastest":45126.65390046296,"address":"대한민국 부산광역시 남구 전포대로91번길 27","ble":1044,"modem":2043},{"car":"TZ0296","lock":"잠김","fuel":86,"lock_fuel":98,"lat":35.144732,"lng":129.064814,"lastest":45126.65615740741,"address":"대한민국 부산광역시 남구 전포대로91번길 27","ble":1044,"modem":2043},{"car":"TZ0350","lock":"잠김","fuel":86,"lock_fuel":97,"lat":35.1358401298113,"lng":129.091673770407,"lastest":45126.62689814815,"address":"대한민국 부산광역시 남구 진남로 9","ble":1044,"modem":2043},{"car":"TZ0214","lock":"잠김","fuel":72,"lock_fuel":97,"lat":35.1460542879334,"lng":129.065807835932,"lastest":45126.65667824074,"address":"대한민국 부산광역시 문현동 1229-1번지 A동 1층 117호 번지 남구 부산광역시 KR","ble":1044,"modem":2043},{"car":"TZ0440","lock":"잠김","fuel":73,"lock_fuel":97,"lat":35.1460087037343,"lng":129.065941883032,"lastest":45126.65773148148,"address":"대한민국 부산광역시 문현동 1229-1번지 A동 1층 117호 번지 남구 부산광역시 KR","ble":1044,"modem":2043},{"car":"TZ0187","lock":"잠김","fuel":72,"lock_fuel":97,"lat":35.1700257456647,"lng":129.134089995177,"lastest":45126.61869212963,"address":"대한민국 부산광역시 벡스코","ble":1044,"modem":2043},{"car":"TZ0201","lock":"열림","fuel":72,"lock_fuel":97,"lat":35.1702121618485,"lng":129.133573961034,"lastest":45126.65216435185,"address":"대한민국 부산광역시 벡스코","ble":1044,"modem":2043},{"car":"TZ0219","lock":"잠김","fuel":73,"lock_fuel":97,"lat":35.1701627805304,"lng":129.133586411947,"lastest":45126.65677083333,"address":"대한민국 부산광역시 벡스코","ble":1044,"modem":2043},{"car":"TZ0458","lock":"잠김","fuel":78,"lock_fuel":98,"lat":35.1783012835304,"lng":129.075323716242,"lastest":45126.64195601852,"address":"대한민국 부산광역시 부산시청","ble":1044,"modem":2043},{"car":"TZ0429","lock":"잠김","fuel":77,"lock_fuel":96,"lat":35.1490403483368,"lng":129.063349847201,"lastest":45126.62412037037,"address":"대한민국 부산광역시 부산진구 전포동 892-14","ble":1044,"modem":2043},{"car":"TZ0428","lock":"잠김","fuel":75,"lock_fuel":98,"lat":35.1489693073021,"lng":129.063655496123,"lastest":45126.62873842593,"address":"대한민국 부산광역시 부산진구 전포동 892-24","ble":1044,"modem":2043},{"car":"TZ0456","lock":"잠김","fuel":77,"lock_fuel":98,"lat":35.1490051025246,"lng":129.063571872251,"lastest":45126.630740740744,"address":"대한민국 부산광역시 부산진구 황령대로","ble":1044,"modem":2043},{"car":"TZ0500","lock":"잠김","fuel":44,"lock_fuel":98,"lat":35.1485039310818,"lng":129.067385545417,"lastest":45126.65762731482,"address":"대한민국 부산광역시 부산진구 황령대로74번길 28","ble":1044,"modem":2044},{"car":"TZ0167","lock":"잠김","fuel":71,"lock_fuel":97,"lat":35.1691276755869,"lng":129.131784736199,"lastest":45126.6397337963,"address":"대한민국 부산광역시 센텀시티","ble":1044,"modem":2043},{"car":"TZ0143","lock":"잠김","fuel":72,"lock_fuel":98,"lat":35.1690272253785,"lng":129.13159686899,"lastest":45126.639699074076,"address":"대한민국 부산광역시 센텀시티","ble":1044,"modem":2043},{"car":"TZ0197","lock":"잠김","fuel":71,"lock_fuel":98,"lat":35.1695414406926,"lng":129.132836993038,"lastest":45126.63458333333,"address":"대한민국 부산광역시 센텀시티역 벡스코","ble":1044,"modem":2043},{"car":"TZ0468","lock":"잠김","fuel":75,"lock_fuel":98,"lat":35.1798706195532,"lng":129.076329324143,"lastest":45126.6450462963,"address":"대한민국 부산광역시 시청역","ble":1044,"modem":2043},{"car":"TZ0386","lock":"잠김","fuel":77,"lock_fuel":98,"lat":35.1797850165024,"lng":129.076185719931,"lastest":45126.62069444444,"address":"대한민국 부산광역시 시청역","ble":1044,"modem":2043},{"car":"TZ0068","lock":"잠김","fuel":69,"lock_fuel":96,"lat":35.1689702235994,"lng":129.131467335123,"lastest":45126.63775462963,"address":"대한민국 부산광역시 신세계센텀시티","etc":"라이트 안꺼짐","ble":1044,"modem":2043},{"car":"TZ0494","lock":"잠김","fuel":56,"lock_fuel":98,"lat":35.1806915506026,"lng":129.076937554265,"lastest":45126.64978009259,"address":"대한민국 부산광역시 연제구 1365-1","ble":1044,"modem":2043},{"car":"TZ0011","lock":"잠김","fuel":77,"lock_fuel":97,"lat":35.1804522086428,"lng":129.076598257753,"lastest":45126.6165625,"address":"대한민국 부산광역시 연제구 시청로 6","ble":1044,"modem":2043},{"car":"TZ0497","lock":"잠김","fuel":76,"lock_fuel":98,"lat":35.1812396005803,"lng":129.076895201894,"lastest":45126.64824074074,"address":"대한민국 부산광역시 연제구 연산동 1359-7","ble":1044,"modem":2043},{"car":"TZ0467","lock":"잠김","fuel":76,"lock_fuel":98,"lat":35.1802978564824,"lng":129.077212745538,"lastest":45126.657638888886,"address":"대한민국 부산광역시 연제구 연산동 1363-8","ble":1044,"modem":2043},{"car":"TZ0472","lock":"잠김","fuel":77,"lock_fuel":98,"lat":35.180366923091,"lng":129.076896889395,"lastest":45126.65230324074,"address":"대한민국 부산광역시 연제구 연산동 1364-6","ble":1044,"modem":2043},{"car":"TZ0470","lock":"잠김","fuel":78,"lock_fuel":98,"lat":35.1803027408375,"lng":129.076763867637,"lastest":45126.63921296296,"address":"대한민국 부산광역시 연제구 연산동 1364-7","ble":1043,"modem":2044},{"car":"TZ0499","lock":"잠김","fuel":76,"lock_fuel":98,"lat":35.1793225549392,"lng":129.07637167689,"lastest":45126.620034722226,"address":"대한민국 부산광역시 연제구 연산동 1416-6","ble":1044,"modem":2043},{"car":"TZ0400","lock":"잠김","fuel":79,"lock_fuel":98,"lat":35.1792894166632,"lng":129.076401353961,"lastest":45126.622037037036,"address":"대한민국 부산광역시 연제구 연산동 1416-6","ble":1044,"modem":2043},{"car":"TZ0463","lock":"잠김","fuel":74,"lock_fuel":98,"lat":35.1790099414575,"lng":129.075885665576,"lastest":45126.635925925926,"address":"대한민국 부산광역시 연제구 연산동 1427-2","ble":1044,"modem":2043},{"car":"TZ0361","lock":"잠김","fuel":76,"lock_fuel":98,"lat":35.1792918132516,"lng":129.075803891779,"lastest":45126.6183912037,"address":"대한민국 부산광역시 연제구 연산동 1429-2","ble":1044,"modem":2043},{"car":"TZ0471","lock":"잠김","fuel":75,"lock_fuel":97,"lat":35.1791127804793,"lng":129.076424602396,"lastest":45126.618483796294,"address":"대한민국 부산광역시 연제구 연산동 2366","ble":1044,"modem":2043},{"car":"TZ0027","lock":"잠김","fuel":77,"lock_fuel":97,"lat":35.1807665995063,"lng":129.077296986736,"lastest":45126.6553587963,"address":"대한민국 부산광역시 연제구 연산제5동 1364-8","ble":1044,"modem":2043},{"car":"TZ0490","lock":"잠김","fuel":77,"lock_fuel":97,"lat":35.1802794572498,"lng":129.076641843538,"lastest":45126.647939814815,"address":"대한민국 부산광역시 연제구 중앙대로 1001","ble":1044,"modem":2043},{"car":"TZ0398","lock":"잠김","fuel":79,"lock_fuel":98,"lat":35.1802747135782,"lng":129.076040851759,"lastest":45126.61733796296,"address":"대한민국 부산광역시 연제구 중앙대로 1001","ble":1044,"modem":2043},{"car":"TZ0378","lock":"잠김","fuel":96,"lock_fuel":98,"lat":35.1802230359285,"lng":129.076549496666,"lastest":45126.64109953704,"address":"대한민국 부산광역시 연제구 중앙대로 1001","ble":1044,"modem":2043},{"car":"TZ0466","lock":"잠김","fuel":97,"lock_fuel":98,"lat":35.1802483361399,"lng":129.076580417092,"lastest":45126.64098379629,"address":"대한민국 부산광역시 연제구 중앙대로 1001","ble":1044,"modem":2043},{"car":"TZ0028","lock":"잠김","fuel":94,"lock_fuel":98,"lat":35.1802165174401,"lng":129.076583115933,"lastest":45126.64349537037,"address":"대한민국 부산광역시 연제구 중앙대로 1001","ble":1044,"modem":2043},{"car":"TZ0431","lock":"잠김","fuel":77,"lock_fuel":97,"lat":35.145072949847,"lng":129.064328840677,"lastest":45126.617800925924,"address":"대한민국 부산광역시 이마트문현점","ble":1044,"modem":2043},{"car":"TZ0042","lock":"잠김","fuel":80,"lock_fuel":98,"lat":35.1449611960282,"lng":129.064319717067,"lastest":45126.61570601852,"address":"대한민국 부산광역시 이마트문현점","ble":1044,"modem":2043},{"car":"TZ0430","lock":"잠김","fuel":84,"lock_fuel":98,"lat":35.144980613544,"lng":129.06442138973,"lastest":45126.6577662037,"address":"대한민국 부산광역시 이마트문현점","ble":1044,"modem":2043},{"car":"TZ0337","lock":"잠김","fuel":80,"lock_fuel":98,"lat":35.1693299576288,"lng":129.175681386242,"lastest":45126.648252314815,"address":"대한민국 부산광역시 장산역13번출구","ble":1044,"modem":2043},{"car":"TZ0405","lock":"잠김","fuel":77,"lock_fuel":98,"lat":35.1491138065639,"lng":129.063294025964,"lastest":45126.62278935185,"address":"대한민국 부산광역시 지오플레이스","ble":1044,"modem":2043},{"car":"TZ0145","lock":"잠김","fuel":81,"lock_fuel":97,"lat":35.1629851687518,"lng":129.159317155422,"lastest":45126.635300925926,"address":"대한민국 부산광역시 해운대구 구남로 8-2","ble":1044,"modem":2043},{"car":"TZ0024","lock":"잠김","fuel":80,"lock_fuel":98,"lat":35.1707181945,"lng":129.17811937869,"lastest":45126.62849537037,"address":"대한민국 부산광역시 해운대구 세실로 64 화목데파트 상가 지하1층 163호","ble":1044,"modem":2043},{"car":"TZ0147","lock":"잠김","fuel":71,"lock_fuel":96,"lat":35.1696483254876,"lng":129.132548879408,"lastest":45126.64679398148,"address":"대한민국 부산광역시 해운대구 센텀동로 9 트럼프월드","ble":1044,"modem":2043},{"car":"TZ0152","lock":"잠김","fuel":83,"lock_fuel":97,"lat":35.1733138403254,"lng":129.128629227455,"lastest":45126.62678240741,"address":"대한민국 부산광역시 해운대구 센텀중앙로","ble":1043,"modem":2044},{"car":"TZ0221","lock":"잠김","fuel":81,"lock_fuel":98,"lat":35.1716326285921,"lng":129.17458923294,"lastest":45126.6321875,"address":"대한민국 부산광역시 해운대구 양운로 98","ble":1044,"modem":2043},{"car":"TZ0056","lock":"잠김","fuel":82,"lock_fuel":98,"lat":35.1716457268233,"lng":129.174521964179,"lastest":45126.63144675926,"address":"대한민국 부산광역시 해운대구 양운로 98","ble":1044,"modem":2043},{"car":"TZ0151","lock":"잠김","fuel":71,"lock_fuel":98,"lat":35.1688993970824,"lng":129.132012848518,"lastest":45126.6396875,"address":"대한민국 부산광역시 해운대구 우동 1291-27","ble":1044,"modem":2043},{"car":"TZ0129","lock":"잠김","fuel":71,"lock_fuel":96,"lat":35.1690348449108,"lng":129.13173885392,"lastest":45126.63966435185,"address":"대한민국 부산광역시 해운대구 우동 1291-27","ble":1044,"modem":2043},{"car":"TZ0163","lock":"잠김","fuel":70,"lock_fuel":96,"lat":35.1691426859584,"lng":129.131727652977,"lastest":45126.63899305555,"address":"대한민국 부산광역시 해운대구 우동 1497","ble":1044,"modem":2043},{"car":"TZ0180","lock":"잠김","fuel":71,"lock_fuel":97,"lat":35.1699376740709,"lng":129.133355355206,"lastest":45126.62453703704,"address":"대한민국 부산광역시 해운대구 우동 1498","ble":1044,"modem":2043},{"car":"TZ0202","lock":"잠김","fuel":74,"lock_fuel":96,"lat":35.1700711857473,"lng":129.13307118687,"lastest":45126.62862268519,"address":"대한민국 부산광역시 해운대구 우동 1498","ble":1044,"modem":2043},{"car":"TZ0078","lock":"잠김","fuel":75,"lock_fuel":98,"lat":35.163195545351,"lng":129.158075492591,"lastest":45126.64931712963,"address":"대한민국 부산광역시 해운대구 우동 530-7","ble":1044,"modem":2043},{"car":"TZ0077","lock":"잠김","fuel":71,"lock_fuel":98,"lat":35.1633361381593,"lng":129.15922336364,"lastest":45126.62311342593,"address":"대한민국 부산광역시 해운대구 우동 548-4","ble":1044,"modem":2043},{"car":"TZ0034","lock":"잠김","fuel":90,"lock_fuel":98,"lat":35.1611786620403,"lng":129.156451771727,"lastest":45126.63491898148,"address":"대한민국 부산광역시 해운대구 우동 642-5","ble":1044,"modem":2043},{"car":"TZ0203","lock":"잠김","fuel":70,"lock_fuel":97,"lat":35.1698642598944,"lng":129.178323956574,"lastest":45126.651192129626,"address":"대한민국 부산광역시 해운대구 좌동 1315","ble":1044,"modem":2043},{"car":"TZ0234","lock":"잠김","fuel":79,"lock_fuel":98,"lat":35.1696572855608,"lng":129.175327021866,"lastest":45126.63306712963,"address":"대한민국 부산광역시 해운대구 좌동 1459-6","ble":1044,"modem":2043},{"car":"TZ0245","lock":"잠김","fuel":80,"lock_fuel":98,"lat":35.1699137443322,"lng":129.175416966104,"lastest":45126.61565972222,"address":"대한민국 부산광역시 해운대구 좌동 1459-6","ble":1044,"modem":2043},{"car":"TZ0055","lock":"잠김","fuel":80,"lock_fuel":98,"lat":35.1698868420713,"lng":129.176399244614,"lastest":45126.65310185185,"address":"대한민국 부산광역시 해운대구 좌동 1467-2 장산 역 8 번출구","ble":1044,"modem":2043},{"car":"TZ0220","lock":"잠김","fuel":73,"lock_fuel":98,"lat":35.1697412707118,"lng":129.178051110822,"lastest":45126.65143518519,"address":"대한민국 부산광역시 해운대구 좌동 1479-3","ble":1044,"modem":2043},{"car":"TZ0291","lock":"잠김","fuel":79,"lock_fuel":98,"lat":35.1697093064999,"lng":129.175703041841,"lastest":45126.63185185185,"address":"대한민국 부산광역시 해운대구 좌제1동 해운대로 793","ble":1044,"modem":2043},{"car":"TZ0326","lock":"잠김","fuel":79,"lock_fuel":98,"lat":35.1696432728595,"lng":129.175559768673,"lastest":45126.61662037037,"address":"대한민국 부산광역시 해운대구 좌제1동 해운대로 793","ble":1044,"modem":2043},{"car":"TZ0268","lock":"잠김","fuel":82,"lock_fuel":98,"lat":35.1697243389021,"lng":129.175645947001,"lastest":45126.63431712963,"address":"대한민국 부산광역시 해운대구 좌제1동 해운대로 793","ble":1044,"modem":2043},{"car":"TZ0272","lock":"잠김","fuel":82,"lock_fuel":98,"lat":35.1698198467479,"lng":129.175637865275,"lastest":45126.62284722222,"address":"대한민국 부산광역시 해운대구 좌제1동 해운대로 793","ble":1044,"modem":2043},{"car":"TZ0303","lock":"잠김","fuel":79,"lock_fuel":97,"lat":35.1694293316068,"lng":129.175693652559,"lastest":45126.645578703705,"address":"대한민국 부산광역시 해운대구 좌제1동 해운대로 793","ble":1044,"modem":2043},{"car":"TZ0279","lock":"잠김","fuel":94,"lock_fuel":98,"lat":35.1607580558511,"lng":129.163598979518,"lastest":45126.63317129629,"address":"대한민국 부산광역시 해운대구 중동 1405-26","ble":1044,"modem":2043},{"car":"TZ0339","lock":"잠김","fuel":57,"lock_fuel":98,"lat":35.1631193709115,"lng":129.158627713232,"lastest":45126.6202662037,"address":"대한민국 부산광역시 해운대구 해운대로 620 라뮤에뜨","ble":1044,"modem":2043},{"car":"TZ0311","lock":"잠김","fuel":68,"lock_fuel":98,"lat":35.1638989638529,"lng":129.158644423649,"lastest":45126.62332175926,"address":"대한민국 부산광역시 해운대구 해운대로 621","ble":1044,"modem":2043},{"car":"TZ0309","lock":"잠김","fuel":81,"lock_fuel":98,"lat":35.169239,"lng":129.176291,"lastest":45126.65724537037,"address":"대한민국 부산광역시 해운대구 해운대로 802","ble":1044,"modem":2043},{"car":"TZ0323","lock":"잠김","fuel":72,"lock_fuel":98,"lat":35.1702840150276,"lng":129.134291371561,"lastest":45126.62671296296,"address":"대한민국 부산광역시 홈플러스","ble":1044,"modem":2043}]
    
    // 주소 복사
    function copyToClipboard(val) {
        const t = document.createElement("textarea");
        document.body.appendChild(t);
        t.value = val;
        t.select();
        document.execCommand('copy');
        document.body.removeChild(t);
    }

    function copy(addr, carnum) {

        var jsonIdx = tourzy_bike.findIndex(function(key) {return key["car"] === carnum});
        
        var idx = JSON.stringify(jsonIdx);

        // console.log('idx : ' + idx)

        const onlongclick = ($target, duration, callback) => {

            $target.onmousedown = () => {
                const timer = setTimeout(callback, duration);

                $target.onmouseup = () => {
                clearTimeout(timer);
                };
            };  

            $target.ontouchstart = () => {
                const timer = setTimeout(callback, duration);

                $target.ontouchend = () => {
                clearTimeout(timer);
                };
            };  
        }

        // 코드예시
        const $target = document.querySelector('#html');

        onlongclick($target, 300, () => {

            alert('차량 번호 : ' + carnum + ' 작업을 완료했습니다.');

            mapLoad()
        });
        
        copyToClipboard(addr);

        $("#copied").show();

        self.setTimeout("hideDiv()", 2000);
    }

    $(document).ready(function () {

        $("#copied").hide();
    });
    // 주소 복사

    function hideDiv () {
        
        $("#copied").hide();
    }

    function mapLoad () {
        
        // $("#folium-map").html(JSON.stringify(XLSX.utils.sheet_to_json (sheet)));

        // console.log(JSON.stringify(XLSX.utils.sheet_to_json(sheet)))

        map = L.map("map", {
            center: [35.16380454089401, 129.1326448135078],
            crs: L.CRS.EPSG3857,
            zoom: 11,
            zoomControl: true,
            preferCanvas: false,
        });

        tile_layer = L.tileLayer(
            "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            {"attribution": "Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
        ).addTo(map);

        for (let i = 0; i < tourzy_bike.length; i++) {

            // console.log(`${i} car:${tourzy_bike[i].car}, lat:${tourzy_bike[i].lat}, lng:${tourzy_bike[i].lng}`)

            // 시작
            marker = L.marker(
                [tourzy_bike[i].lat, tourzy_bike[i].lng],
                {}
            ).addTo(map);

            var icon_color = ''

            if (tourzy_bike[i].fuel <= 10) {

                icon_color = 'red'

            } else {

                icon_color = 'orange'
            }
        
            icon = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": "flag", "iconColor": "white", "markerColor": icon_color, "prefix": "glyphicon"}
            );
            marker.setIcon(icon);
        
            popup = L.popup({"maxWidth": "100%"});
            html = $(`<div id="html" onclick="copy('${tourzy_bike[i].address.replace("대한민국 ", "")}', '${tourzy_bike[i].car}')"; style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].car}<br /><div id="html" style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].fuel}%</div></div>`)[0];
            popup.setContent(html);
            
            marker.bindPopup(popup);
            // 끝
        }
    }

    window.onload = function () {
        
        mapLoad ()
    }

    // $(document).ready(function () {
        
    //     var map = L.map("map", {
    //         center: [35.16380454089401, 129.1326448135078],
    //         crs: L.CRS.EPSG3857,
    //         zoom: 11,
    //         zoomControl: true,
    //         preferCanvas: false,
    //     });

    //     var tile_layer = L.tileLayer(
    //         "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
    //         {"attribution": "Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
    //     ).addTo(map);

    //     for (let i = 0; i < tourzy_bike.length; i++) {

    //         // console.log(`${i} car:${tourzy_bike[i].car}, lat:${tourzy_bike[i].lat}, lng:${tourzy_bike[i].lng}`)

    //         // 시작
    //         var marker = L.marker(
    //             [tourzy_bike[i].lat, tourzy_bike[i].lng],
    //             {}
    //         ).addTo(map);

    //         var icon_color = ''

    //         if (tourzy_bike[i].fuel <= 10) {

    //             icon_color = 'red'

    //         } else {

    //             icon_color = 'orange'
    //         }
        
    //         var icon = L.AwesomeMarkers.icon(
    //             {"extraClasses": "fa-rotate-0", "icon": "flag", "iconColor": "white", "markerColor": icon_color, "prefix": "glyphicon"}
    //         );
    //         marker.setIcon(icon);
        
    //         var popup = L.popup({"maxWidth": "100%"});
    //         var html = $(`<div id="html" onclick="copy('${tourzy_bike[i].address.replace("대한민국 ", "")}', '${tourzy_bike[i].car}')"; style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].car}<br /><div id="html" style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].fuel}%</div></div>`)[0];
    //         popup.setContent(html);
            
    //         marker.bindPopup(popup);
    //         // 끝
    //     }
    // });

</script>

<body>

    <div id="copied">주소가 복사되었습니다.</div>

    <div id="updated">UPDATED 2023.07.19. 15:45 총 85대
        <br/>
        빨간색 15% 이하
        <br/>
        주황색 15% 이상 30% 이하
    </div>
    
    <div class="folium-map" id="map"></div>
        
</body>

</html>