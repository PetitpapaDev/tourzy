<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    
    <style>html, body {width: 100%; height: 100%; margin: 0; padding: 0;}</style>
    <style>#map {position:absolute; top:0; bottom:0; right:0; left:0;}</style>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
            
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <style>
        #map {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }

        #updated {
            width: 100%;
            text-align: center;
            position: fixed;
            top: 0%;
            padding-top: 10px;
            padding-bottom: 10px;

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            color: #000000;
            background: #FF7500;

            cursor: pointer;

            z-index: 9999;
        }

        #copied {
            width: 300px;
            height: 50px;
            text-align: center;
            position: fixed;
            bottom: 10%;
            left: 50%;
            transform: translate(-50%, 0%);

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            line-height: 50px;
            color: #000000;
            background: #FF7500;
            border-radius: 10px;

            z-index: 9999;
        }
    </style>
        
</head>

<script>

    var map
    var tile_layer
    var marker
    var icon
    var popup
    var html

    var tourzy_bike = 
[{"car":"TZ0248","sell":"판매중","lock":"잠김","전원공급 상태":"ON","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":98,"lat":"35.14601350178163","lng":"129.1163837210571","lastest":45161.37600694445,"address":"대한민국 부산광역시 수영구 남천동 148-6","ble":"1044","modem":"2045","etc":"회수 요청 -> 조작 안된다고 함"},{"car":"TZ0165","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"오류","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":38,"lock_fuel":98,"lat":35.157623,"lng":129.111459,"lastest":45161.37229166667,"address":"부산 수영구 장대골로19번길 31 협성엠파이어아파트","ble":"1044","modem":"2045","etc":"GPS - 회수 요청 -> 지하인듯"},{"car":"TZ0001","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":64,"lat":"35.140607334186136","lng":"129.10594743936184","lastest":45162.36961805556,"address":"대한민국 부산광역시 수영구 남천동 340-1","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0025","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.140694618600264","lng":"129.10694861863328","lastest":45162.37263888889,"address":"대한민국 부산광역시 수영구 남천동 24-30","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0038","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":93,"lat":"35.16682114647936","lng":"129.16983183787798","lastest":45162.37079861111,"address":"대한민국 부산광역시 해운대구 중동 해운대로 723 하모니타워마브러스 103동 101호","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0067","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":76,"lat":"35.16872339184929","lng":"129.1210992239621","lastest":45162.37430555555,"address":"대한민국 부산광역시 수영구 수영동 440","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0070","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":90,"lat":"35.1369327427137","lng":"129.09862426870598","lastest":45162.36888888889,"address":"대한민국 부산광역시 남구 대연동 407-14","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0163","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":91,"lat":"35.14062622156097","lng":"129.10591070523472","lastest":45162.37532407408,"address":"대한민국 부산광역시 수영구 남천동 340-1","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0169","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":93,"lat":"35.12144254638346","lng":"129.09897293504716","lastest":45162.37480324074,"address":"대한민국 부산광역시 남구 용당동 602-7","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0180","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":76,"lat":"35.12916096109626","lng":"129.1032896637052","lastest":45162.37405092592,"address":"대한민국 부산광역시 남구 대연동 1917","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0226","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":88,"lat":"35.13986615631204","lng":"129.1079674167749","lastest":45162.37200231481,"address":"대한민국 부산광역시 수영구 남천동 271-1","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0232","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":83,"lat":"35.1337139370616","lng":"129.10126319490112","lastest":45162.37354166667,"address":"대한민국 부산광역시 남구 대연동 495-2","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0256","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":88,"lat":"35.149236951834425","lng":"129.11383926523112","lastest":45162.37570601852,"address":"대한민국 부산광역시 수영구 광안동 203-6","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0311","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":66,"lat":"35.13798611102519","lng":"129.09878511799033","lastest":45162.37353009259,"address":"대한민국 부산광역시 남구 대연동 311-1","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0320","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":46,"lat":"35.169569346942765","lng":"129.17547712123041","lastest":45162.37028935185,"address":"대한민국 부산광역시 해운대구 해운대로 793","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0347","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.134689859724574","lng":"129.09348234003642","lastest":45162.37412037037,"address":"대한민국 부산광역시 남구 유엔평화로3번길 29","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0353","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":88,"lat":"35.16294276898372","lng":"129.15899203844918","lastest":45162.37113425926,"address":"대한민국 부산광역시 해운대구 우동 548-41","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0398","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":95,"lat":"35.131205228454405","lng":"129.09482937118182","lastest":45162.37140046297,"address":"대한민국 부산광역시 남구 유엔로169번길 26","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0416","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":75,"lat":"35.139528138525925","lng":"129.10388530631664","lastest":45162.37148148148,"address":"대한민국 부산광역시 남구 대연동 1864","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0425","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.156606826789776","lng":"129.1224645183354","lastest":45162.37393518518,"address":"대한민국 부산광역시 수영구 민락동 173-21번지 1층","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0474","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":82,"lat":"35.157241041013656","lng":"129.12073243554093","lastest":45162.36987268519,"address":"대한민국 부산광역시 수영구 광안해변로255번길 49","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0479","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":94,"lat":"35.151463401411654","lng":"129.1164223750134","lastest":45162.37222222222,"address":"대한민국 부산광역시 수영구 광안동 197-2","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0484","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":88,"lat":"35.17366165104024","lng":"129.1228119628826","lastest":45162.37219907407,"address":"대한민국 부산광역시 해운대구 재송동 1005-78 APEC 공원 산책로","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0486","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":94,"lat":"35.13685591698291","lng":"129.0999865052612","lastest":45162.36993055556,"address":"대한민국 부산광역시 남구 대연동 72-2","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0488","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.13316093716947","lng":"129.11490081244614","lastest":45162.37340277778,"address":"대한민국 부산광역시 남구 용호동 967","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0008","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.15259631513809","lng":"129.11778358796826","lastest":45162.37344907408,"address":"대한민국 부산광역시 수영구 광남로","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0014","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.1705574930559","lng":"129.13685007745656","lastest":45162.37233796297,"address":"대한민국 부산광역시 벡스코.시립미술관","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0015","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.18776905392245","lng":"129.21298839293019","lastest":45162.37488425926,"address":"대한민국 부산광역시 기장군 기장읍 기장해안로 98","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0021","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.17536391352922","lng":"129.1715856959526","lastest":45162.37202546297,"address":"대한민국 부산광역시 해운대구 좌동순환로 118","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0048","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.14611026401802","lng":"129.11363075300562","lastest":45162.36951388889,"address":"대한민국 부산광역시 수영구 남천제2동 5-29","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0061","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.15398501414395","lng":"129.11929883949233","lastest":45162.37255787037,"address":"대한민국 부산광역시 수영구 광안동 192-10","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0076","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.16791416815753","lng":"129.17418853663773","lastest":45162.36916666666,"address":"대한민국 부산광역시 해운대구 좌동 1472","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0104","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.12662935486371","lng":"129.11310382392048","lastest":45162.37168981481,"address":"대한민국 부산광역시 메트로유치원","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0130","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.13660950315258","lng":"129.1106798950182","lastest":45162.37137731481,"address":"대한민국 부산광역시 메가마트남천점","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0141","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.14113963887885","lng":"129.115091279808","lastest":45162.37125,"address":"대한민국 부산광역시 남천제2동 삼익스포츠센터","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0147","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.14286602733144","lng":"129.1176299290479","lastest":45162.37063657407,"address":"대한민국 부산광역시 수영구 남천동 148-93","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0157","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.170494191122486","lng":"129.16338899750733","lastest":45162.37431712963,"address":"대한민국 부산광역시 해운대구 우동 275-2","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0177","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.131516837134164","lng":"129.1128636857362","lastest":45162.37017361111,"address":"대한민국 부산광역시 남구 분포로 61","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0179","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.13969099237525","lng":"129.10171800609933","lastest":45162.37539351852,"address":"대한민국 부산광역시 남구 대연동 93-6","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0190","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.138622416365955","lng":"129.10483829952418","lastest":45162.371875,"address":"대한민국 부산광역시 남구 대연제3동 34-1","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0212","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.13331798325204","lng":"129.1123619154393","lastest":45162.36965277778,"address":"대한민국 부산광역시 남구 분포로 145","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0218","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.15649587751277","lng":"129.17460878263765","lastest":45162.36929398148,"address":"대한민국 부산광역시 해운대구 중동 994-2","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0219","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.15784828530212","lng":"129.11237200505488","lastest":45162.37233796297,"address":"대한민국 부산광역시 수영구 장대골로7번길 27","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0261","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.13254548858342","lng":"129.09486465617786","lastest":45162.37481481482,"address":"대한민국 부산광역시 남구 대연동 874-15","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0262","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.14688958169684","lng":"129.11405252959776","lastest":45162.37231481481,"address":"대한민국 부산광역시 수영구 남천동로108번길 54 2 층","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0279","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.1463482490024","lng":"129.1106343745177","lastest":45162.37383101852,"address":"대한민국 부산광역시 남천동 29-9번지 수영구 부산광역시 KR","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0284","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.16628254888729","lng":"129.1133791994588","lastest":45162.37571759259,"address":"대한민국 부산광역시 수영구 광안동 1074-10","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0313","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.14277451292567","lng":"129.10964321688476","lastest":45162.37038194444,"address":"대한민국 부산광역시 수영구 남천동 18-16","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0325","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.163206347594716","lng":"129.14200792905686","lastest":45162.37540509259,"address":"대한민국 부산광역시 해운대구 우동 997-4","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0364","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.13533201548595","lng":"129.09729045749617","lastest":45162.37510416667,"address":"대한민국 부산광역시 남구 대연동 77-2","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0385","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.13720310435515","lng":"129.099872367465","lastest":45162.36973379629,"address":"대한민국 부산광역시 남구 대연동 72-24","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0403","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.15854980336066","lng":"129.12104738235178","lastest":45162.36987268519,"address":"대한민국 부산광역시 수영구 민락동 162-10","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0449","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.13231611323561","lng":"129.1130832996533","lastest":45162.37137731481,"address":"대한민국 부산광역시 남구 분포로 115","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0450","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.1299185217761","lng":"129.10539552864597","lastest":45162.37274305556,"address":"대한민국 부산광역시 남구 대연동 598-6","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0456","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.127005916440936","lng":"129.09046291602922","lastest":45162.3703587963,"address":"대한민국 부산광역시 남구 대연동 968-6","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0178","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":97,"lat":"35.15086187965633","lng":"129.11571063956345","lastest":45162.37401620371,"address":"대한민국 부산광역시 수영구 광안동 남천바다로33번길 61","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0220","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":96,"lat":"35.17183073492785","lng":"129.16446463047382","lastest":45162.37128472222,"address":"대한민국 부산광역시 해운대구 우동 산71-4","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0056","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":96,"lat":"35.14947014989773","lng":"129.11390838995888","lastest":45162.37118055556,"address":"대한민국 부산광역시 수영구 광남로 81","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0101","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":96,"lat":"35.16756554102075","lng":"129.11797487701094","lastest":45162.37481481482,"address":"대한민국 부산광역시 수영구 광안동 44-19","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0267","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":96,"lat":"35.132575012292044","lng":"129.09203299718348","lastest":45162.37082175926,"address":"대한민국 부산광역시 남구 대연동 888-10","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0324","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":96,"lat":"35.162464344464176","lng":"129.16307832468448","lastest":45162.37141203704,"address":"대한민국 부산광역시 KR 부산광역시 해운대구 중동 1394-161번지 3층 OFSSTUDIO","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0351","sell":"판매중","lock":"열림","전원공급 상태":"ON","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":51,"lock_fuel":97,"lat":"35.19069534103293","lng":"129.21580144350966","lastest":45162.14032407408,"address":"대한민국 부산광역시 기장군 기장읍 시랑리 735","ble":"1044","modem":"2045","etc":"회수 요청 -> 단말기 자동으로 열림"},{"car":"TZ0054","sell":"판매중","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":58,"lock_fuel":98,"lat":"35.12937258795355","lng":"129.08729287059182","lastest":45162.36879629629,"address":"대한민국 부산광역시 부산공업고등학교후문건널목","ble":"1044","modem":"2045","etc":"회수 요청 -> 단말기 자동으로 열림"}]





    // 접었다 펴기
    $(document).ready(function () {
        $("#ebike_info").hide();

        $("#updated_date").click(function () {
            $("#ebike_info").show();
        });
        $("#ebike_info").click(function () {
            $("#ebike_info").hide();
        });
    });

    // 주소 복사
    function copyToClipboard(val) {
        const t = document.createElement("textarea");
        document.body.appendChild(t);
        t.value = val;
        t.select();
        document.execCommand('copy');
        document.body.removeChild(t);
    }

    function copy(addr, carnum) {

        var jsonIdx = tourzy_bike.findIndex(function(key) {return key["car"] === carnum});
        
        var idx = JSON.stringify(jsonIdx);

        // console.log('idx : ' + idx)

        const onlongclick = ($target, duration, callback) => {

            $target.onmousedown = () => {
                const timer = setTimeout(callback, duration);

                $target.onmouseup = () => {
                clearTimeout(timer);
                };
            };  

            $target.ontouchstart = () => {
                const timer = setTimeout(callback, duration);

                $target.ontouchend = () => {
                clearTimeout(timer);
                };
            };  
        }

        // 코드예시
        const $target = document.querySelector('#html');

        onlongclick($target, 300, () => {

            alert('차량 번호 : ' + carnum + ' 작업을 완료했습니다.');
        });
        
        copyToClipboard(addr);

        $("#copied").show();

        self.setTimeout("hideDiv()", 2000);
    }
    
    $(document).ready(function () {

        $("#copied").hide();
    });
    // 주소 복사

    function hideDiv () {
        
        $("#copied").hide();
    }

    function mapLoad () {
        
        // $("#folium-map").html(JSON.stringify(XLSX.utils.sheet_to_json (sheet)));

        // console.log(JSON.stringify(XLSX.utils.sheet_to_json(sheet)))

        map = L.map("map", {
            center: [35.16380454089401, 129.1326448135078],
            crs: L.CRS.EPSG3857,
            zoom: 11,
            zoomControl: true,
            preferCanvas: false,
        });

        tile_layer = L.tileLayer(
            "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            {"attribution": "Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
        ).addTo(map);

        var states = [{
            "type": "Feature",
                "properties": {"party": "남구"},
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [
                        [[129.1077972219697,35.13814554127586],[129.10682609023084,35.13879931028232],[129.10589158374594,35.139486492446366],[129.10536345944791,35.13989725866416],[129.104435188401,35.140616918212814],[129.10366973287762,35.14134217158322],[129.10309666633788,35.14194032133146],[129.10254451109753,35.14258122048816],[129.10130340149595,35.143843464109196],[129.10036704353283,35.14435281827068],[129.09928955581472,35.144774773152506],[129.09801222657575,35.1442173978803],[129.0977755376085,35.14376689962242],[129.0981187213061,35.143126734084014],[129.09856213899974,35.14219768715516],[129.09660876463772,35.14350823046979],[129.09511347404862,35.14392617461584],[129.09472878428866,35.14300096841382],[129.09621832762798,35.14257497197467],[129.09654596511132,35.14227358089937],[129.09726407915147,35.14225255453717],[129.09727743062462,35.14080634351643],[129.09730701094128,35.139488715328625],[129.09674546533176,35.139202651972504],[129.0961338381017,35.13884491812624],[129.09522033841824,35.13851912280826],[129.09479244870693,35.13806212288428],[129.09485899617744,35.136873468250705],[129.09481242270454,35.13573215881215],[129.09109967791372,35.13534356724524],[129.09133103491547,35.133565433184685],[129.09153571300902,35.13183093403032],[129.09178499573437,35.12991106327503],[129.09525714508513,35.129926352670545],[129.09729158224889,35.129918006019636],[129.09793856549902,35.12951781278527],[129.09873860772205,35.12911761882441],[129.10131649547617,35.12751711837592],[129.10449697018385,35.12589709839666],[129.10525335726376,35.12585704077215],[129.10579402633726,35.12558037834124],[129.1065904962995,35.12552273266269],[129.10741984972105,35.12535750622051],[129.10742751799367,35.12122947871555],[129.10811458963184,35.117642580871774],[129.10842804142163,35.11446182550428],[129.10891077605316,35.1118828866221],[129.10955505918497,35.11077319992318],[129.1101443992504,35.109139140646946],[129.11479311542388,35.11024708213469],[129.11501410661236,35.11559516287108],[129.11496257223487,35.119182405250186],[129.1149771702033,35.12361036762113],[129.1149758448872,35.12428049680817],[129.11469336203504,35.124691920463746],[129.11414809481033,35.124875340792514],[129.11338334497898,35.125167599615374],[129.1132325608454,35.12586243613036],[129.11333639631607,35.12632943874084],[129.11391111122475,35.127021629799486],[129.1163996304059,35.12957768812832],[129.11678253482637,35.12999318604082],[129.11700433218982,35.13050750423049],[129.11766406836415,35.131221065446624],[129.1172118340076,35.13146149075632],[129.117803707883,35.13212005151384],[129.1152418729769,35.13360277881619],[129.11391677481805,35.13437436468138],[129.11288986442628,35.13495727909149],[129.11258046554173,35.135063434002504],[129.11230100494504,35.13510308021739],[129.1118645887073,35.13546362090297],[129.11141632371073,35.135802260065695],[129.11106779207302,35.13603499995766],[129.11053062487406,35.13631374643121],[129.11029001648433,35.13649171843912],[129.10976307452574,35.13684791411736],[129.1092109420761,35.13722379853526],[129.10894393682412,35.13736016831778],[129.1077972219697,35.13814554127586]]
                    ]
                }
            }, {
                "type": "Feature",
                "properties": {"party": "수영구"},
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [
                        [[129.12601751656405,35.16554232777018],[129.12568546480298,35.16599284718748],[129.12540100426335,35.16594201475912],[129.12523574398153,35.165996122754834],[129.12479201465993,35.16672675156201],[129.1243803777163,35.16744988456307],[129.1237645532384,35.16847450690306],[129.12313497488287,35.16952911053713],[129.12234749255686,35.170861046326486],[129.12193999751895,35.17153450924542],[129.12151874860353,35.172163000575736],[129.12109998339534,35.17286850603645],[129.1203373712841,35.17373890336317],[129.1198243887079,35.17435162115106],[129.11899711156232,35.175152645402655],[129.11873832795953,35.17551147000343],[129.1182052757191,35.17677234603924],[129.11812190458312,35.17714596747713],[129.11803853344713,35.178216595938764],[129.11677255202721,35.18036626883877],[129.11338657960945,35.17891661620736],[129.11298983648572,35.1782962447119],[129.11226786002135,35.17694363414591],[129.11158328463773,35.17563993546703],[129.1102728942638,35.17310641567204],[129.10872093102958,35.1701871281288],[129.10727687422172,35.16735603568581],[129.10797627935915,35.16671899779229],[129.10917818909087,35.16638481280887],[129.10866092565232,35.16446592823843],[129.10711983300405,35.16407810473153],[129.10581553315285,35.164325204587584],[129.1053554749488,35.16354298218401],[129.1050858289496,35.162824439473596],[129.10485191001328,35.161805585473644],[129.10493936637533,35.16131029039033],[129.10499705597803,35.160512279213556],[129.10494830136184,35.159183745332925],[129.10714966792742,35.158066077475105],[129.10890049494242,35.15658006272707],[129.1096077741831,35.15637955099733],[129.11018318819123,35.15644856622475],[129.11132302743482,35.15630808550526],[129.11223909747105,35.15613333769146],[129.11179861197388,35.15410381430918],[129.11163292747295,35.153291949884505],[129.11135559883195,35.15207040542818],[129.11099186350015,35.15097935596641],[129.11069377689205,35.15023538769158],[129.1105143252379,35.149667735256315],[129.11037367792676,35.149153667654275],[129.11021827225977,35.148627836638],[129.11006568068404,35.148098723299654],[129.10990506011376,35.14753761716143],[129.1097175107024,35.14682157682573],[129.10954052254237,35.146207895648786],[129.10923363587773,35.14491469532163],[129.10890893389075,35.14343805429773],[129.10842856420692,35.14296055462549],[129.10793249549448,35.14253633578416],[129.10737899643777,35.1419417127634],[129.10669578455418,35.14238874090974],[129.1059974221243,35.14291908571181],[129.10528796857477,35.14300729859822],[129.10421842646934,35.14309596610033],[129.10333774465585,35.14300664530873],[129.10268306302015,35.14249874168762],[129.10290561901547,35.142237508135366],[129.10381041519852,35.14125358469854],[129.1039392544829,35.14112996693329],[129.10419474535718,35.1409027814767],[129.10475599784905,35.1404224201212],[129.10507864574095,35.14015003302298],[129.1055427956902,35.139799891037406],[129.10574714656698,35.13963968818942],[129.1062057758369,35.13930494064465],[129.10651059719743,35.13908977710625],[129.10691061932943,35.13880621272904],[129.10737937659084,35.138478384338],[129.10760807326096,35.13832499852824],[129.10773105212058,35.13824029569396],[129.1078540309802,35.13815559285969],[129.1080052561056,35.138050475684715],[129.108318258754,35.137833769347935],[129.10896780491112,35.13737329741144],[129.1092358750455,35.13728453830872],[129.1097431622452,35.13694095785111],[129.11030444287152,35.13656156697423],[129.11077979188983,35.136227657547714],[129.1110010925221,35.13614463529191],[129.11137473659767,35.1361215669522],[129.11168687453318,35.13623323794929],[129.11188593570566,35.13640013769724],[129.11202399283303,35.136525463944196],[129.1123784902951,35.13686574771899],[129.1127685734511,35.13723097545986],[129.11346355086823,35.13789560626485],[129.1134900234571,35.13786854973607],[129.1139149508038,35.138272557331554],[129.11431654389628,35.13864781147184],[129.11510502329782,35.13940039992602],[129.11537205186812,35.13941989847628],[129.11556009673848,35.139328941315895],[129.11636394794192,35.139531053496924],[129.11656722474126,35.14608663177773],[129.11504831598825,35.146125257870565],[129.11488895769588,35.146170956568476],[129.11481994380202,35.14631894142562],[129.11454292463299,35.146961546301824],[129.11450665495965,35.14727429166933],[129.11477162660412,35.148171132658064],[129.11492842156187,35.14859538108547],[129.11510616946583,35.149016774035104],[129.11539384712046,35.149405936734226],[129.11613988643109,35.15038785821913],[129.11682437348713,35.151262228854264],[129.11724494363716,35.15182407937931],[129.11785993263828,35.15259916884992],[129.11815185167507,35.15301283841481],[129.1185936718295,35.15347487023736],[129.11915474103694,35.15381699911744],[129.1196203155343,35.154103200779005],[129.12003324895448,35.15437180910388],[129.12055552181977,35.154568323686746],[129.12133956517636,35.15483600678713],[129.12198957953922,35.155060434083396],[129.12303760055119,35.15535596286078],[129.12322315498756,35.15517824582665],[129.1233326653101,35.15497754162894],[129.12353504662485,35.15479432299833],[129.12372076117097,35.15445377672065],[129.12389201223328,35.15400680195721],[129.12412580896978,35.1534197282527],[129.12424119780772,35.15332105224603],[129.12434247833056,35.15296860251395],[129.1242621142956,35.15274592500871],[129.12442297576877,35.1526893785675],[129.12459794555707,35.15273088171642],[129.1251514653557,35.1528522119565],[129.12633030688124,35.1531113518939],[129.12726878945648,35.153326406102124],[129.1272201945893,35.15346861416576],[129.12854289397455,35.15380912343208],[129.12984752528973,35.15412476765265],[129.13073765900884,35.15434096067156],[129.1311178200749,35.15432601820126],[129.13141780869933,35.15432637394096],[129.13173987192306,35.154369889650724],[129.13315844923096,35.15460494114296],[129.13423170350381,35.154860308387],[129.13480582233365,35.15518361176291],[129.13514154268535,35.155578587562644],[129.1352927940385,35.15613286613363],[129.13496820736702,35.15680485630527],[129.1340859737113,35.157729453027756],[129.13344439705855,35.158461043423884],[129.13229414148407,35.159724607909425],[129.13142170994826,35.16069227455009],[129.13100831683744,35.16116832530214],[129.13014078402858,35.162434591405116],[129.1294490965248,35.16324070497603],[129.12859766469757,35.16416657732431],[129.12728237519175,35.16490504948294],[129.12601751656405,35.16554232777018]]
                ]
                }
            }, {
                "type": "Feature",
                "properties": {"party": "오시리아"},
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [
                        [[129.19732673332595,35.17581595850085],[129.19828677154925,35.17764030080704],[129.19909426160223,35.17868697674528],[129.20145861348857,35.18006878208871],[129.20193338500937,35.18027683627718],[129.20248065468343,35.180467770000774],[129.20301563804537,35.18055055085072],[129.20356119835606,35.18062342553661],[129.2042693335146,35.180605872733736],[129.20485497966553,35.18060432441253],[129.20533744436946,35.180817915945724],[129.20601568007737,35.1810655946649],[129.20636157347695,35.18166075444891],[129.20673232949662,35.18181585094672],[129.20707634429536,35.18175827739133],[129.20759742043725,35.181866094923365],[129.20817824058216,35.18207570504017],[129.20883684074232,35.18230628684567],[129.2096529981996,35.18278608808318],[129.21073313191167,35.183631417191506],[129.2113571348437,35.18472527815706],[129.21256014541058,35.18804839986868],[129.21657871815785,35.188062122028995],[129.21656422944878,35.19040626905449],[129.2163614717844,35.19130169350024],[129.21834913881037,35.19246016318044],[129.22034538808413,35.19367770173886],[129.22035869830646,35.19310981794921],[129.21995043584934,35.19243150825309],[129.21977813369364,35.19151166497376],[129.21920290315228,35.19060346636199],[129.2199017416215,35.18945317219189],[129.22094155289858,35.18912014802733],[129.22194993290952,35.18964093319256],[129.22201994882758,35.19031052227486],[129.22170067123204,35.190948533647145],[129.22072041744323,35.19131115963425],[129.2208641143376,35.19214372002851],[129.22129585137287,35.19306411247079],[129.22121277567769,35.194175893889096],[129.2231248185418,35.196701386087696],[129.2240237347501,35.19843157044105],[129.22442246604282,35.197959753023625],[129.2249970683744,35.197218305645556],[129.22695975662043,35.19682761932144],[129.22829500688795,35.19681284289008],[129.22800005217192,35.197425288878705],[129.22658552514804,35.19758674897481],[129.22567877814643,35.19769946761021],[129.225173563042,35.19865825740235],[129.22455608316795,35.19946462467681],[129.22346452244176,35.19969883171796],[129.2206596925127,35.195093534035465],[129.21580165924217,35.19212091390972],[129.21486563427806,35.19326469650339],[129.21313300125223,35.19513087747087],[129.21097210951942,35.1963720424303],[129.20909000173913,35.19764689879821],[129.2052229213208,35.19761593187377],[129.20478962861435,35.19522399547304],[129.20424112099215,35.19285700347942],[129.20351109226448,35.19095782875053],[129.2026876543096,35.189132946060724],[129.2008700689147,35.18589712580237],[129.1993243928015,35.18331222564542],[129.19746638588578,35.18131488925506],[129.19802363675734,35.1800730504972],[129.1976187205869,35.1793647834007],[129.1968858064439,35.178230016462464],[129.19570324912954,35.176435748642724],[129.19572357429922,35.175893775210724],[129.19732673332595,35.17581595850085]]
                ]
                }
            }, {
                "type": "Feature",
                "properties": {"party": "해운대구"},
                "geometry": {
                    "type": "Polygon",
                    "coordinates": [
                        [[129.16471721235746,35.17735529893247],[129.1645480302921,35.176536604223614],[129.16433746497063,35.1759841588369],[129.16421388030184,35.17537654103658],[129.16383648353735,35.17488580617113],[129.16326969296776,35.17415817886364],[129.16362287284448,35.173481296908406],[129.1618666883606,35.17267672899931],[129.1615771667877,35.172759557165904],[129.16124753273596,35.172527334569395],[129.16113619303934,35.17198362924324],[129.16117572146317,35.1715037114992],[129.16080630519673,35.170884548747395],[129.16089741284068,35.17074791425252],[129.16120701913968,35.17058151133935],[129.16091525228734,35.16967084888908],[129.1602499835667,35.169706329728626],[129.15970643499026,35.16915336024928],[129.1589886897745,35.16862260730511],[129.1581489031438,35.16871263113198],[129.15748636664307,35.16916730356766],[129.15711011134778,35.16977575829122],[129.15506446108554,35.16946642345373],[129.15484232945914,35.1684211687255],[129.15564242752174,35.167155173620785],[129.1569359026604,35.16631709538379],[129.15700057619114,35.16532669117946],[129.15620311958293,35.163753644514344],[129.15527635772628,35.162851202984726],[129.15451333840818,35.162182155603276],[129.15363459497627,35.16159194757314],[129.1532188147345,35.161353463411274],[129.15250895675686,35.1609394115636],[129.1515858498671,35.16067565089705],[129.15039339115793,35.16070368292141],[129.14851543001618,35.161558814465494],[129.14970550280435,35.163857319277994],[129.14884181307303,35.165824162224254],[129.14683459191366,35.16518549911841],[129.1460908975047,35.16471972281998],[129.14565209770086,35.16442389139124],[129.14499883380012,35.164312613833914],[129.14423645297717,35.164083007934224],[129.14376617795466,35.164465409676936],[129.14354612635128,35.16524535234049],[129.1434864268583,35.16660588642754],[129.14335743313927,35.167847463955084],[129.14362401151033,35.168130297937296],[129.1441163561796,35.16805276213377],[129.14469862754072,35.167740390449005],[129.145294757749,35.16754131043295],[129.1461086179051,35.167877296623885],[129.14636321046464,35.16812855231137],[129.1461709304785,35.16849171485707],[129.14604150543852,35.16868174983408],[129.14474793736332,35.169222984955795],[129.1433665207839,35.169784320341776],[129.14297788961267,35.169648842344515],[129.14241050736103,35.16938828679515],[129.14204839278742,35.16939885326225],[129.14170717042407,35.1693183349944],[129.1416654030525,35.169471221296],[129.14185866024832,35.16964891624646],[129.1423444083685,35.169576128674095],[129.1424941443889,35.16989166941879],[129.1421705727684,35.17046467621492],[129.1422301085375,35.17065878628347],[129.14223388095195,35.170769807772224],[129.1420774797632,35.170829595010346],[129.14228899581826,35.171384015678015],[129.14240349587192,35.17169033872143],[129.14211597681307,35.17199666176486],[129.1418606192845,35.17229641207264],[129.14139621182022,35.1724384247716],[129.1407917830569,35.17242294412775],[129.14071801951496,35.17190796147125],[129.1402655719645,35.172019692736754],[129.1405425469914,35.17320971143876],[129.14154227606002,35.17480374450905],[129.14151233370666,35.175382979889946],[129.14052213693134,35.17578959466307],[129.13849265921186,35.174233297006424],[129.1359757455922,35.17411407310189],[129.13572010023756,35.17320092715529],[129.13500747794131,35.17324123323057],[129.13431456716808,35.17328756171587],[129.13380924618485,35.17366696169279],[129.1341097907943,35.17432039664142],[129.13373038607332,35.17486976966713],[129.13282630548127,35.17472081968832],[129.13214634354983,35.17507565354708],[129.13133494294385,35.175700404513236],[129.13096511913616,35.17620871235833],[129.13023110250066,35.176762817540606],[129.12920463460995,35.17712368690644],[129.1280477357348,35.177492666941674],[129.12697348351594,35.17843381427811],[129.12394485315355,35.181533407739124],[129.1214287439734,35.18465015014108],[129.12120350263655,35.184693044691514],[129.12095374215943,35.18465736313151],[129.12073583391162,35.18461739653664],[129.12045088518943,35.18458377169759],[129.11928010814125,35.18452843610727],[129.1190189724063,35.18451710832299],[129.11880578746667,35.184506233907285],[129.11845519182538,35.18449268100797],[129.1181497742022,35.18448029247331],[129.11945414247822,35.181221994473304],[129.11986975079378,35.17959215987939],[129.12094685623367,35.176701157056684],[129.121525359433,35.175589115229855],[129.12225313337808,35.174601616295334],[129.1231410175928,35.174458844372225],[129.12360679291845,35.17405432256338],[129.12539965280007,35.17172801324162],[129.12864654419496,35.16777300133923],[129.13162357454416,35.16397242306277],[129.13274078535323,35.163366838453925],[129.1343073125766,35.162403858545915],[129.1369752272613,35.16307569539023],[129.1386010693795,35.16301890703669],[129.14013252846144,35.16208020168865],[129.1414019642431,35.16091851847818],[129.14250250766833,35.159984958717345],[129.14310990555902,35.15822233065386],[129.1409910344775,35.15656944885825],[129.14119718740918,35.155953823547364],[129.14152817382086,35.15523013137549],[129.1421364000982,35.15469631509467],[129.14326289015474,35.154284858727934],[129.1444407822316,35.15396345885832],[129.14562968902925,35.15359703038969],[129.1463636621995,35.153401808283306],[129.14666088889885,35.15338224725451],[129.14695811559824,35.15344674016781],[129.1471772356384,35.15356643219749],[129.14730823792956,35.153746162627996],[129.14745080966588,35.15424301966246],[129.14747589106568,35.15476389186251],[129.14770963251567,35.155829650500976],[129.148075215037,35.15623729751118],[129.14847203759913,35.156470992609414],[129.14885417386967,35.156632644164944],[129.151200964324,35.15721424139061],[129.15256294405026,35.15762893781705],[129.15330464952325,35.158039313076245],[129.15449757571946,35.15654266093659],[129.15532709622124,35.15720725066683],[129.15581666028606,35.157468940899776],[129.15633068945465,35.15771738372713],[129.15677748181457,35.15791915290477],[129.15713055077038,35.1580613327362],[129.15775720976842,35.158318907630274],[129.15854467156612,35.158570472797365],[129.16031937993625,35.15894490637698],[129.16185051033568,35.15925462139671],[129.1630609283402,35.159468384221185],[129.164520924567,35.15961526939323],[129.1685693969785,35.15946668450604],[129.17065162557697,35.15888140369678],[129.17204544663923,35.160982248314596],[129.1735612895895,35.16136520830932],[129.17540832531822,35.16164875389085],[129.17647612306496,35.162154720759986],[129.17817771601904,35.16243945770275],[129.1794215520083,35.16299447101456],[129.18077087727153,35.1641754778946],[129.18235724785274,35.16575282017732],[129.18389201455904,35.168225660380116],[129.1838661676685,35.16968030731371],[129.1831455799155,35.17057751621219],[129.18284392393707,35.17158137566791],[129.18328527250299,35.17248266621749],[129.18383272820893,35.173218650450096],[129.1841938264867,35.174822716933335],[129.183425641614,35.17630462468563],[129.18188375212407,35.178767675771425],[129.18126979270954,35.17945979995143],[129.18034071668197,35.18014881608327],[129.179143078567,35.180941808056645],[129.1767828646598,35.18166789613669],[129.17374830865168,35.182212446046876],[129.17132951307815,35.181869181300826],[129.17017062033216,35.181512742149934],[129.16792855157462,35.18051982033454],[129.16572318266805,35.17909407434246],[129.16495441119332,35.17829608551028],[129.16471721235746,35.17735529893247]]
                ]
                }
            }
        ];

        L.geoJSON(states, {
            style: function(feature) {
                switch (feature.properties.party) {
                    case '남구':   return {color: "#0000ff"};
                    case '수영구':   return {color: "#0000ff"};
                    case '연제구':   return {color: "#0000ff"};
                    case '오시리아':   return {color: "#0000ff"};
                    case '해운대구':   return {color: "#0000ff"};
                }
            }
        }).addTo(map);

        for (let i = 0; i < tourzy_bike.length; i++) {

            // console.log(`${i} car:${tourzy_bike[i].car}, lat:${tourzy_bike[i].lat}, lng:${tourzy_bike[i].lng}`)

            // 시작
            marker = L.marker(
                [tourzy_bike[i].lat, tourzy_bike[i].lng],
                {}
            )
            .addTo(map);

            var icon_color = ''
            var icon_img = ''

            if (tourzy_bike[i].fuel <= 10) {

                icon_color = 'red'

            } else {

                icon_color = 'orange'
            }

            if (tourzy_bike[i].lock == '열림') {

                icon_img = 'ban-circle'

            } else {

                if (tourzy_bike[i].etc.includes('회수')) {
                    
                    icon_img = 'plus-sign'

                } else {

                    if (tourzy_bike[i].etc == '이탈' || tourzy_bike[i].etc == '재배치') {

                        icon_img = 'refresh'

                    } else {

                        icon_img = 'flash'
                    }
                }
            }
        
            icon = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": icon_img, "iconColor": "white", "markerColor": icon_color, "prefix": "glyphicon"}
            );
            marker.setIcon(icon);
        
            popup = L.popup({"maxWidth": "100%"});
            html = $(`<div id="html" onclick="copy('${tourzy_bike[i].address.replace("대한민국 ", "")}', '${tourzy_bike[i].car}')"; style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].car}<br /><div id="html" style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].fuel}%</div><br /><div id="html" style="width: 100.0px; height: 100.0%;">${tourzy_bike[i].etc}</div></div>`)[0];
            popup.setContent(html);
            
            marker.bindPopup(popup);
            // 끝
        }


        // 레이어 컨트롤
        // var a = L.layerGroup([marker]);
        // var b = L.layerGroup([tourzy_bike_rearrange]);

        // var layerControl = L.control.layers().addTo(map);

        // layerControl.addOverlay(a, "자전거");
        // layerControl.addOverlay(b, "재배치");
        // 레이어 컨트롤
    }

    window.onload = function () {
        
        mapLoad ()
    }

</script>

<body>

    <div id="copied">주소가 복사되었습니다.</div>

    <div id="updated">
        
        <p id="updated_date">UPDATED 2023.08.24. 16:00</p>

        <p id="ebike_info">
            찾아야 하는 자전거 11대
            <br />
            TZ0005 ____ TZ0201 ____ TZ0209 ____ TZ0252 ____ TZ0271 ____ TZ0286
            <br />
            TZ0288 ____ TZ0303 ____ TZ0327 ____ TZ0355 ____ TZ0390&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <br />
            금지 - 잠금 열린 차량 (0대)
            <br/>
            플러스 - 회수 후 정비가 필요한 차량 (1대)
            <br/>
            리프레쉬 - 재배치가 필요한 차량 (0대)
            <br/>
            번개 - 배터리 부족 빨간색 10% 이하, 주황색 10% 이상 20% 이하 (40대)
        </p>
    </div>
    
    <div class="folium-map" id="map"></div>
        
</body>

</html>