<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    
    <style>html, body {width: 100%; height: 100%; margin: 0; padding: 0;}</style>
    <style>#map {position:absolute; top:0; bottom:0; right:0; left:0;}</style>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
            
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <style>
        #map {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }

        #updated {
            width: 100%;
            text-align: center;
            position: fixed;
            top: 0%;
            padding-top: 10px;
            padding-bottom: 10px;

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            color: #000000;
            background: #FF7500;

            z-index: 9999;
        }

        #copied {
            width: 300px;
            height: 50px;
            text-align: center;
            position: fixed;
            bottom: 10%;
            left: 50%;
            transform: translate(-50%, 0%);

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            line-height: 50px;
            color: #000000;
            background: #FF7500;
            border-radius: 10px;

            z-index: 9999;
        }
    </style>
        
</head>

<script>

    var map
    var tile_layer
    var marker
    var icon
    var popup
    var html

    var tourzy_bike = 




[{"car":"TZ0283","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":88,"lat":"35.14128386011526","lng":"129.09988840582614","lastest":45148.66483796296,"address":"대한민국 부산광역시 남구 대연동 158번지","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0304","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":80,"lat":"35.13797997275367","lng":"129.0679552399664","lastest":45148.66511574074,"address":"대한민국 부산광역시 남구 문현동 652-1","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0404","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":85,"lat":"35.1314913676087","lng":"129.09843410834108","lastest":45148.66307870371,"address":"대한민국 부산광역시 남구 용소로64번길 49-1","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0255","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.17413204077728","lng":"129.16496656015732","lastest":45148.66358796296,"address":"대한민국 부산광역시 부대앞","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0192","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":87,"lat":"35.13845727676929","lng":"129.06757383449724","lastest":45148.66509259259,"address":"대한민국 부산광역시 삼성아파트","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0085","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":91,"lat":"35.15899646562696","lng":"129.06391907036277","lastest":45148.66483796296,"address":"대한민국 부산광역시 서전로37번길 26, A동 1층 159호 부산진구 부산광역시 KR","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0351","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":86,"lat":"35.15370325314669","lng":"129.11798954101405","lastest":45148.66827546297,"address":"대한민국 부산광역시 수영구 광안동 191-18","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0458","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":88,"lat":"35.167989923953805","lng":"129.11425973884914","lastest":45148.66611111111,"address":"대한민국 부산광역시 수영구 광안동 연수로416번길 2","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0251","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":90,"lat":"35.14447350794946","lng":"129.1094228605067","lastest":45148.6616087963,"address":"대한민국 부산광역시 수영구 남천동 69-48","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0247","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":88,"lat":"35.14014915941233","lng":"129.1065318610322","lastest":45148.66515046296,"address":"대한민국 부산광역시 수영구 남천제1동 323","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0011","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":90,"lat":"35.15665936776197","lng":"129.12253654634222","lastest":45148.66511574074,"address":"대한민국 부산광역시 수영구 민락동 221-2","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0437","lock":"잠김","전원공급 상태":"오류","락커 상태":"정상","라이트 상태":"오류","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.17389905681734","lng":"129.09269354304112","lastest":45148.66271990741,"address":"대한민국 부산광역시 연제구 연산동 1835-1","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0354","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":1,"lat":"35.16350658767668","lng":"129.1364797554572","lastest":45142.47170138889,"address":"대한민국 부산광역시 해강중고교","ble":"1044","modem":"2044","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0315","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.16146823889247","lng":"129.16781216192456","lastest":45148.66762731481,"address":"대한민국 부산광역시 해운대구 달맞이길 30","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0086","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.17745727598395","lng":"129.1699385226472","lastest":45148.66138888889,"address":"대한민국 부산광역시 해운대구 좌동순환로 117","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0158","lock":"잠김","전원공급 상태":"오류","락커 상태":"정상","라이트 상태":"오류","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.187131526553095","lng":"129.20246509250714","lastest":45148.66210648148,"address":"대한민국 부산광역시 동해선송정역","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0045","lock":"잠김","전원공급 상태":"오류","락커 상태":"정상","라이트 상태":"오류","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":95,"lat":"35.17014458086572","lng":"129.16988964956536","lastest":45148.66298611111,"address":"대한민국 부산광역시 해운대구 중동 142-14","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0161","lock":"잠김","전원공급 상태":"오류","락커 상태":"정상","라이트 상태":"오류","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":20,"lock_fuel":95,"lat":"35.16702590246892","lng":"129.1791512903839","lastest":45148.66461805555,"address":"대한민국 부산광역시 해운대구 좌동 1333","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0388","lock":"잠김","전원공급 상태":"오류","락커 상태":"정상","라이트 상태":"오류","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":42,"lock_fuel":97,"lat":"35.16611042910609","lng":"129.1174677267607","lastest":45148.66726851852,"address":"대한민국 부산광역시 수영구 광안동 76-22","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0151","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":49,"lock_fuel":96,"lat":"35.16589209873376","lng":"129.11981983400736","lastest":45148.66452546296,"address":"대한민국 부산광역시 수영구 무학로69번길 106","ble":"1044","modem":"2045","etc":"잠금 해제 안됨 - 회수 요청"},{"car":"TZ0132","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":61,"lock_fuel":98,"lat":"35.1559299786374","lng":"129.13029375115514","lastest":45148.66186342593,"address":"대한민국 부산광역시 수영구 민락동 113-12","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0282","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":69,"lock_fuel":97,"lat":"35.1590013698443","lng":"129.12321459530995","lastest":45148.66240740741,"address":"대한민국 부산광역시 수영구 민락동 160-19번지","ble":"1044","modem":"2045","etc":"후미 머드가드 파손 - 회수 요청"},{"car":"TZ0044","lock":"잠김","전원공급 상태":"오류","락커 상태":"정상","라이트 상태":"오류","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":73,"lock_fuel":97,"lat":"35.15347599683315","lng":"129.05926873304728","lastest":45148.6646875,"address":"대한민국 부산광역시 부산진구 중앙대로 680 4층","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0204","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":93,"lock_fuel":98,"lat":"35.180729373608685","lng":"129.08418635292492","lastest":45148.66559027778,"address":"대한민국 부산광역시 연제구 연산동 699-1","ble":"1044","modem":"2045","etc":"후미등 파손 - 회수 요청"},{"car":"TZ0498","lock":"잠김","전원공급 상태":"오류","락커 상태":"정상","라이트 상태":"오류","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":100,"lock_fuel":98,"lat":"35.15543263184123","lng":"129.12149741062476","lastest":45148.66657407407,"address":"대한민국 부산광역시 수영구 광안로61번길 5","ble":"1044","modem":"2045","etc":"단말기 이상 - 회수 요청"},{"car":"TZ0023","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.172448470586026","lng":"129.17254986034226","lastest":45148.66079861111,"address":"대한민국 부산광역시 해운대구 중동 1439-51","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0026","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.15067910068819","lng":"129.1141739012101","lastest":45148.66350694445,"address":"대한민국 부산광역시 수영구 광안동 183-7","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0097","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.18238215600744","lng":"129.0763084901967","lastest":45148.66011574074,"address":"대한민국 부산광역시 연제구 연산동 1353-9","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0156","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.164635585174096","lng":"129.12769411110244","lastest":45148.66290509259,"address":"대한민국 부산광역시 수영구 민락동 산20-18","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0294","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.17968497230344","lng":"129.06810551352646","lastest":45148.66346064815,"address":"대한민국 부산광역시 거제4동주민센터","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0438","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.14474059317197","lng":"129.06733261380958","lastest":45148.66520833333,"address":"대한민국 부산광역시 남구 문현동 541-9번지","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0442","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.16098510831336","lng":"129.11389413812705","lastest":45148.6631712963,"address":"대한민국 부산광역시 수영구 광안동 117-10","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0470","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.16816199931462","lng":"129.12012155044542","lastest":45148.6659375,"address":"대한민국 부산광역시 수영구 민락동 186-4","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0091","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":95,"lat":"35.15251473787184","lng":"129.11181929406035","lastest":45148.66027777778,"address":"대한민국 부산광역시 수영구 광안동 373-165","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0133","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":96,"lat":"35.16751188463046","lng":"129.1795298824311","lastest":45148.66337962963,"address":"대한민국 부산광역시 해운대구 좌동 1485-4","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0280","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":95,"lat":"35.154716117300595","lng":"129.1309194914959","lastest":45148.66267361111,"address":"대한민국 부산광역시 수영구 민락동 113-33","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0433","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":95,"lat":"35.142653004761804","lng":"129.06707562667066","lastest":45148.66561342592,"address":"대한민국 부산광역시 남구 문현동 639-1","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0473","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":95,"lat":"35.147814705035316","lng":"129.06008352003187","lastest":45148.66502314815,"address":"대한민국 부산광역시 부산진구 황령대로 1","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0041","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":95,"lat":"35.1349579168273","lng":"129.08793155241906","lastest":45148.66478009259,"address":"대한민국 부산광역시 남구 수영로 195-2","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0079","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":95,"lat":"35.156351610514164","lng":"129.12506571773838","lastest":45148.66571759259,"address":"대한민국 부산광역시 수영구 민락동 181-38","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0123","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":96,"lat":"35.14477645230055","lng":"129.1127784983726","lastest":45148.6655787037,"address":"대한민국 부산광역시 수영구청.금호어울림","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0166","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":94,"lat":"35.14105147467523","lng":"129.11490032977716","lastest":45148.66228009259,"address":"대한민국 부산광역시 남천제2동 삼익스포츠센터","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0229","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":96,"lat":"35.15638224075504","lng":"129.1249887122923","lastest":45148.66466435185,"address":"대한민국 부산광역시 수영구 민락동 181-38","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0296","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":12,"lock_fuel":96,"lat":"35.16012046468424","lng":"129.0557813175399","lastest":45148.66189814815,"address":"대한민국 부산광역시 부산진구 서면문화로 34","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0103","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":13,"lock_fuel":96,"lat":"35.179304298097435","lng":"129.17550716497342","lastest":45148.6662037037,"address":"대한민국 부산광역시 해운대구 좌동 1402","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0195","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":13,"lock_fuel":96,"lat":"35.13179434774136","lng":"129.1151012420118","lastest":45148.66753472222,"address":"대한민국 부산광역시 남구 용호동 176-57","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0298","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":13,"lock_fuel":95,"lat":"35.14758337220561","lng":"129.11022181321422","lastest":45148.66376157408,"address":"대한민국 부산광역시 수영구 남천제1동 48-28","ble":"1044","modem":"2045","etc":"배터리"},{"car":"TZ0371","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":14,"lock_fuel":94,"lat":"35.159902791456034","lng":"129.05589483290035","lastest":45148.66270833334,"address":"대한민국 부산광역시 부산진구 서면문화로 31","ble":"1044","modem":"2045","etc":"배터리"}]

    // 주소 복사
    function copyToClipboard(val) {
        const t = document.createElement("textarea");
        document.body.appendChild(t);
        t.value = val;
        t.select();
        document.execCommand('copy');
        document.body.removeChild(t);
    }

    function copy(addr, carnum) {

        var jsonIdx = tourzy_bike.findIndex(function(key) {return key["car"] === carnum});
        
        var idx = JSON.stringify(jsonIdx);

        // console.log('idx : ' + idx)

        const onlongclick = ($target, duration, callback) => {

            $target.onmousedown = () => {
                const timer = setTimeout(callback, duration);

                $target.onmouseup = () => {
                clearTimeout(timer);
                };
            };  

            $target.ontouchstart = () => {
                const timer = setTimeout(callback, duration);

                $target.ontouchend = () => {
                clearTimeout(timer);
                };
            };  
        }

        // 코드예시
        const $target = document.querySelector('#html');

        onlongclick($target, 300, () => {

            alert('차량 번호 : ' + carnum + ' 작업을 완료했습니다.');
        });
        
        copyToClipboard(addr);

        $("#copied").show();

        self.setTimeout("hideDiv()", 2000);
    }
    
    $(document).ready(function () {

        $("#copied").hide();
    });
    // 주소 복사

    function hideDiv () {
        
        $("#copied").hide();
    }

    function mapLoad () {
        
        // $("#folium-map").html(JSON.stringify(XLSX.utils.sheet_to_json (sheet)));

        // console.log(JSON.stringify(XLSX.utils.sheet_to_json(sheet)))

        map = L.map("map", {
            center: [35.16380454089401, 129.1326448135078],
            crs: L.CRS.EPSG3857,
            zoom: 11,
            zoomControl: true,
            preferCanvas: false,
        });

        tile_layer = L.tileLayer(
            "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            {"attribution": "Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
        ).addTo(map);

        for (let i = 0; i < tourzy_bike.length; i++) {

            // console.log(`${i} car:${tourzy_bike[i].car}, lat:${tourzy_bike[i].lat}, lng:${tourzy_bike[i].lng}`)

            // 시작
            marker = L.marker(
                [tourzy_bike[i].lat, tourzy_bike[i].lng],
                {}
            ).addTo(map);

            var icon_color = ''
            var icon_img = ''

            if (tourzy_bike[i].fuel <= 10) {

                icon_color = 'red'

            } else {

                icon_color = 'orange'
            }

            if (tourzy_bike[i].lock == '열림') {

                icon_img = 'ban-circle'

            } else {

                if (tourzy_bike[i].etc.includes('회수')) {
                    
                    icon_img = 'plus-sign'

                } else {

                    if (tourzy_bike[i].etc == '이탈' || tourzy_bike[i].etc == '재배치') {

                        icon_img = 'refresh'

                    } else {

                        icon_img = 'flash'
                    }
                }
            }
        
            icon = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": icon_img, "iconColor": "white", "markerColor": icon_color, "prefix": "glyphicon"}
            );
            marker.setIcon(icon);
        
            popup = L.popup({"maxWidth": "100%"});
            html = $(`<div id="html" onclick="copy('${tourzy_bike[i].address.replace("대한민국 ", "")}', '${tourzy_bike[i].car}')"; style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].car}<br /><div id="html" style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].fuel}%</div><br /><div id="html" style="width: 100.0px; height: 100.0%;">${tourzy_bike[i].etc}</div></div>`)[0];
            popup.setContent(html);
            
            marker.bindPopup(popup);
            // 끝
        }
    }

    window.onload = function () {
        
        mapLoad ()
    }

</script>

<body>

    <div id="copied">주소가 복사되었습니다.</div>

    <div id="updated">UPDATED 2023.08.10. 16:00 총 48대
        <br/>
        금지 - 잠금 열린 차량 (0대)
        <br/>
        플러스 - 회수 후 정비가 필요한 차량 (25대)
        <br/>
        리프레쉬 - 재배치가 필요한 차량 (0대)
        <br/>
        번개 - 배터리 부족 빨간색 10% 이하, 주황색 10% 이상 20% 이하 (23대)
    </div>
    
    <div class="folium-map" id="map"></div>
        
</body>

</html>