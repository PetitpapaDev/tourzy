<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
    <script>
        L_NO_TOUCH = false;
        L_DISABLE_3D = false;
    </script>
    
    <style>html, body {width: 100%; height: 100%; margin: 0; padding: 0;}</style>
    <style>#map {position:absolute; top:0; bottom:0; right:0; left:0;}</style>

    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.5/xlsx.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.6.0/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
            
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <style>
        #map {
            position: relative;
            width: 100.0%;
            height: 100.0%;
            left: 0.0%;
            top: 0.0%;
        }

        #updated {
            width: 100%;
            text-align: center;
            position: fixed;
            top: 0%;
            padding-top: 10px;
            padding-bottom: 10px;

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            color: #000000;
            background: #FF7500;

            z-index: 9999;
        }

        #copied {
            width: 300px;
            height: 50px;
            text-align: center;
            position: fixed;
            bottom: 10%;
            left: 50%;
            transform: translate(-50%, 0%);

            font-family: NanumGothic;
            font-style: normal;
            font-weight: bold;
            font-size: 16px;
            line-height: 50px;
            color: #000000;
            background: #FF7500;
            border-radius: 10px;

            z-index: 9999;
        }
    </style>
        
</head>

<script>

    var map
    var tile_layer
    var marker
    var icon
    var popup
    var html

    var tourzy_bike = 




[{"car":"TZ0135","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":100,"lock_fuel":99,"lat":"35.13242574717162","lng":"129.1160026474392","lastest":45145.66712962963,"address":"대한민국 부산광역시 남구 용호동 959","ble":"1044","modem":"2044","etc":"회수"},{"car":"TZ0174","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":76,"lock_fuel":98,"lat":"35.1355133519956","lng":"129.1009909422342","lastest":45145.6640625,"address":"대한민국 부산광역시 대연동 60-47번지 3층 남구 부산광역시 KR","ble":"1044","modem":"2044","etc":"회수"},{"car":"TZ0282","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":76,"lock_fuel":98,"lat":"35.15904567569701","lng":"129.1231074938062","lastest":45145.66497685185,"address":"대한민국 부산광역시 수영구 민락동 160-19","ble":"1044","modem":"2044","etc":"회수"},{"car":"TZ0204","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":92,"lat":"35.15943816248841","lng":"129.1572688821573","lastest":45145.66325231481,"address":"대한민국 부산광역시 우동 648-4번지 해운대구 부산광역시 KR","ble":"1044","modem":"2044","etc":"회수"},{"car":"TZ0354","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":1,"lat":"35.16350658767668","lng":"129.1364797554572","lastest":45142.47170138889,"address":"대한민국 부산광역시 해강중고교","ble":"1044","modem":"2044","etc":"회수"},{"car":"TZ0300","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":67,"lock_fuel":98,"lat":"35.11717064611201","lng":"129.08421813228176","lastest":45145.66465277778,"address":"대한민국 부산광역시 남구 감만동 176-20","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0382","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":83,"lock_fuel":98,"lat":"35.13570043646257","lng":"129.0855809926927","lastest":45145.66528935185,"address":"대한민국 부산광역시 남구청.남구보건소","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0074","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":65,"lock_fuel":98,"lat":"35.21693270452778","lng":"129.0822700818914","lastest":45145.66666666666,"address":"대한민국 부산광역시 동래구 중앙대로1473번길 13","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0384","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":47,"lock_fuel":98,"lat":"35.15572134796764","lng":"129.04163053855603","lastest":45145.66493055555,"address":"대한민국 부산광역시 부산진구 가야동 48-324","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0172","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":47,"lock_fuel":98,"lat":"35.181190813164","lng":"129.10668803442636","lastest":45145.66085648148,"address":"대한민국 부산광역시 연산동 57-28번지 3호 연제구 부산광역시 KR","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0483","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":43,"lock_fuel":97,"lat":"35.193824697744716","lng":"129.11543943702392","lastest":45145.66881944444,"address":"대한민국 부산광역시 해운대구 반여동 1475-6","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0273","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":16,"lock_fuel":96,"lat":"35.19372498135591","lng":"129.11518743994773","lastest":45145.66460648148,"address":"대한민국 부산광역시 해운대구 재송동 1242","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0254","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":77,"lock_fuel":98,"lat":"35.190403837787386","lng":"129.11676089095016","lastest":45145.66166666667,"address":"대한민국 부산광역시 해운대구 재송동 1346","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0165","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":88,"lock_fuel":98,"lat":"35.18991937965816","lng":"129.11625418492537","lastest":45145.6628125,"address":"대한민국 부산광역시 해운대구 재송동 939-27","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0184","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":23,"lock_fuel":95,"lat":"35.18675735640498","lng":"129.11751025636434","lastest":45145.6641087963,"address":"대한민국 부산광역시 해운대구 수영강변대로 316","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0240","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":51,"lock_fuel":97,"lat":"35.187767664549625","lng":"129.1205066315374","lastest":45145.66625,"address":"대한민국 부산광역시 해운대구 재송동 898-3","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0485","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":58,"lock_fuel":97,"lat":"35.184708081573795","lng":"129.1211132022934","lastest":45145.66596064815,"address":"대한민국 부산광역시 해운대구 재송동 1015-10","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0418","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":56,"lock_fuel":97,"lat":"35.18458825480605","lng":"129.12201220309493","lastest":45145.66155092593,"address":"대한민국 부산광역시 해운대구 재송제1동 1098-1","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0378","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.182940696476656","lng":"129.12215595664713","lastest":45145.66159722222,"address":"대한민국 부산광역시 해운대구 재송동 340-6","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0305","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":89,"lock_fuel":98,"lat":"35.18183611507099","lng":"129.12216274201558","lastest":45145.66475694445,"address":"대한민국 부산광역시 해운대구 재송동 343-4","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0173","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.16798264455528","lng":"129.13477567821516","lastest":45145.66267361111,"address":"대한민국 부산광역시 해운대구 APEC로 55","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0278","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":31,"lock_fuel":95,"lat":"35.1827440398789","lng":"129.11674246643574","lastest":45145.66230324074,"address":"대한민국 부산광역시 수영구 망미동 1129","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0320","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":45,"lock_fuel":98,"lat":"35.18157504336552","lng":"129.11627517413146","lastest":45145.66136574074,"address":"대한민국 부산광역시 수영강변e-편한세상","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0489","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":19,"lock_fuel":96,"lat":"35.181477749118066","lng":"129.11617180067947","lastest":45145.66190972222,"address":"대한민국 부산광역시 수영강변e-편한세상","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0056","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":71,"lock_fuel":97,"lat":"35.17900181740983","lng":"129.11600749986218","lastest":45145.66015046297,"address":"대한민국 부산광역시 코스트코홀세일","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0001","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":57,"lock_fuel":98,"lat":"35.17689993276333","lng":"129.11210333386515","lastest":45145.6599537037,"address":"대한민국 부산광역시 수영구 망미동 537-2","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0186","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.174885755591745","lng":"129.11775978962382","lastest":45145.66424768518,"address":"대한민국 부산광역시 수영구 망미동 208-6","ble":"1044","modem":"2044","etc":"재배치"},{"car":"TZ0025","lock":"열림","전원공급 상태":"ON","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":66,"lock_fuel":97,"lat":"35.1397951197558","lng":"129.10579508374767","lastest":45145.66662037037,"address":"대한민국 부산광역시 수영구 남천동 532-50","ble":"1044","modem":"2044","etc":"미잠금"},{"car":"TZ0106","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.16116408778322","lng":"129.15797454112635","lastest":45145.66618055556,"address":"대한민국 부산광역시 구남로18번길 41","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0389","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":86,"lat":"35.140770767018964","lng":"129.10144055029298","lastest":45145.66804398148,"address":"대한민국 부산광역시 남구 대연동 1858","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0304","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":95,"lat":"35.1389889206252","lng":"129.06832433136677","lastest":45145.6653125,"address":"대한민국 부산광역시 남구 문현동 383-1","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0387","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":92,"lat":"35.14266527527723","lng":"129.06717377329522","lastest":45145.66277777778,"address":"대한민국 부산광역시 남구 문현동 639-1","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0029","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":92,"lat":"35.14036145416003","lng":"129.0657510772136","lastest":45145.66256944444,"address":"대한민국 부산광역시 남구 문현동 792","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0497","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":96,"lat":"35.13684271742682","lng":"129.09832189540086","lastest":45145.66777777778,"address":"대한민국 부산광역시 남구 수영로 295","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0193","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.12677440760033","lng":"129.10690173689068","lastest":45145.66237268518,"address":"대한민국 부산광역시 남구 용호동 179-9","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0443","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":97,"lat":"35.132376813905225","lng":"129.11615353236627","lastest":45145.66475694445,"address":"대한민국 부산광역시 남구 용호동 959","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0230","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.12437294670191","lng":"129.11189771417418","lastest":45145.66539351852,"address":"대한민국 부산광역시 남구 용호로90번길 12-4","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0469","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":96,"lat":"35.17859128108583","lng":"129.072133065688","lastest":45145.66461805555,"address":"대한민국 부산광역시 부산진구 거제천로44번길 8","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0062","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.15604964963875","lng":"129.05760195782466","lastest":45145.66571759259,"address":"대한민국 부산광역시 부산진구 서면로 59","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0246","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":86,"lat":"35.16152487453163","lng":"129.1174407259509","lastest":45145.66398148148,"address":"대한민국 부산광역시 수영구 111-18","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0350","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.15128735419501","lng":"129.11064181459386","lastest":45145.37572916667,"address":"대한민국 부산광역시 수영구 광안동 319-9","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0093","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.16321972958666","lng":"129.11397559492264","lastest":45145.66359953704,"address":"대한민국 부산광역시 수영구 광안동 662-1 힐탑 더블 시티 101 동 102 호","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0050","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.16507195053243","lng":"129.11612537271475","lastest":45145.66373842592,"address":"대한민국 부산광역시 수영구 광안동 90-50","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0458","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.167972375510175","lng":"129.11426949343752","lastest":45145.66225694444,"address":"대한민국 부산광역시 수영구 광안동 연수로416번길 2","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0082","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.14210344112408","lng":"129.1099935303064","lastest":45145.66309027778,"address":"대한민국 부산광역시 수영구 남천동 16-10","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0321","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.16115946555282","lng":"129.13077696058917","lastest":45145.66621527778,"address":"대한민국 부산광역시 수영구 민락동 1-24","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0477","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":96,"lat":"35.16114965763902","lng":"129.13082740064104","lastest":45145.66452546296,"address":"대한민국 부산광역시 수영구 민락동 1-24","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0259","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.154738879384205","lng":"129.13090309497355","lastest":45145.6640625,"address":"대한민국 부산광역시 수영구 민락동 113-33","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0366","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.168117938546004","lng":"129.12002606737212","lastest":45145.66436342592,"address":"대한민국 부산광역시 수영구 민락동 126-3","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0032","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.157178712796174","lng":"129.12451613283272","lastest":45145.66293981481,"address":"대한민국 부산광역시 수영구 민락동 189-39","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0051","lock":"열림","전원공급 상태":"ON","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":98,"lat":"35.161610639306176","lng":"129.13052998005105","lastest":45145.66672453703,"address":"대한민국 부산광역시 수영구 민락동 336-50","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0405","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":89,"lat":"35.15717810089476","lng":"129.125022596768","lastest":45145.66597222222,"address":"대한민국 부산광역시 수영구 민락동 35-25","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0439","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.15782605701517","lng":"129.12805169794825","lastest":45145.66561342592,"address":"대한민국 부산광역시 수영구 민락본동로11번길 9","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0481","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.15662259209337","lng":"129.13488391593768","lastest":45145.66575231482,"address":"대한민국 부산광역시 수영구 민락수변로 141","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0428","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.14688086810134","lng":"129.1120029688681","lastest":45145.66746527778,"address":"대한민국 부산광역시 수영구청","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0400","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.17786752548085","lng":"129.07955786429235","lastest":45145.66695601852,"address":"대한민국 부산광역시 연제구 연제로8번길 37","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0243","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.17033589783178","lng":"129.17992154582805","lastest":45145.66173611111,"address":"대한민국 부산광역시 좌동 1321번지 상가동 지하층 층 10호 벽산1차아파트 해운대구 부산광역시 KR","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0078","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.17014912819325","lng":"129.14072134098743","lastest":45145.66055555556,"address":"대한민국 부산광역시 해운대구 우동 1102-66","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0187","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.16826437538698","lng":"129.1394855968818","lastest":45145.66097222222,"address":"대한민국 부산광역시 해운대구 우동 1196-4","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0252","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":11,"lock_fuel":96,"lat":"35.16821765918974","lng":"129.1394440750598","lastest":45145.66178240741,"address":"대한민국 부산광역시 해운대구 우동 1196-47","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0310","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":95,"lat":"35.16892132174734","lng":"129.15596591566438","lastest":45145.66621527778,"address":"대한민국 부산광역시 해운대구 우동 379-20","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0257","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.15952458845556","lng":"129.15945911533868","lastest":45145.6674537037,"address":"대한민국 부산광역시 해운대구 우동 625-2","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0171","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":93,"lat":"35.16732576447155","lng":"129.1348933224461","lastest":45145.66719907407,"address":"대한민국 부산광역시 해운대구 우동 산153-6","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0108","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":95,"lat":"35.17118460263479","lng":"129.13141000577141","lastest":45145.66043981481,"address":"대한민국 부산광역시 해운대구 우동 센텀동로 25","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0072","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":96,"lat":"35.168373163783485","lng":"129.1567917016318","lastest":45145.66625,"address":"대한민국 부산광역시 해운대구 우동2로 59","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0480","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":97,"lat":"35.15769850840123","lng":"129.14842771032974","lastest":45145.66880787037,"address":"대한민국 부산광역시 해운대구 우제1동 1434","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0096","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":92,"lat":"35.17429725247244","lng":"129.17945609560627","lastest":45145.66194444444,"address":"대한민국 부산광역시 해운대구 좌동순환로 248","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0080","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"정상","fuel":10,"lock_fuel":98,"lat":"35.15933465048359","lng":"129.17020481737228","lastest":45145.66491898148,"address":"대한민국 부산광역시 해운대구 중동 1039-13","ble":"1044","modem":"2044","etc":"배터리"},{"car":"TZ0024","lock":"잠김","전원공급 상태":"OFF","락커 상태":"정상","라이트 상태":"정상","GPS 상태":"정상","BLE 상태":"정상","자전거 컨트롤러 상태":"오류","fuel":0,"lock_fuel":90,"lat":"35.1635120127297","lng":"129.17536733201032","lastest":45145.6615625,"address":"대한민국 부산광역시 해운대구 중동 726-6","ble":"1044","modem":"2044","etc":"배터리"}]    



    // 주소 복사
    function copyToClipboard(val) {
        const t = document.createElement("textarea");
        document.body.appendChild(t);
        t.value = val;
        t.select();
        document.execCommand('copy');
        document.body.removeChild(t);
    }

    function copy(addr, carnum) {

        var jsonIdx = tourzy_bike.findIndex(function(key) {return key["car"] === carnum});
        
        var idx = JSON.stringify(jsonIdx);

        // console.log('idx : ' + idx)

        const onlongclick = ($target, duration, callback) => {

            $target.onmousedown = () => {
                const timer = setTimeout(callback, duration);

                $target.onmouseup = () => {
                clearTimeout(timer);
                };
            };  

            $target.ontouchstart = () => {
                const timer = setTimeout(callback, duration);

                $target.ontouchend = () => {
                clearTimeout(timer);
                };
            };  
        }

        // 코드예시
        const $target = document.querySelector('#html');

        onlongclick($target, 300, () => {

            alert('차량 번호 : ' + carnum + ' 작업을 완료했습니다.');
        });
        
        copyToClipboard(addr);

        $("#copied").show();

        self.setTimeout("hideDiv()", 2000);
    }
    
    $(document).ready(function () {

        $("#copied").hide();
    });
    // 주소 복사

    function hideDiv () {
        
        $("#copied").hide();
    }

    function mapLoad () {
        
        // $("#folium-map").html(JSON.stringify(XLSX.utils.sheet_to_json (sheet)));

        // console.log(JSON.stringify(XLSX.utils.sheet_to_json(sheet)))

        map = L.map("map", {
            center: [35.16380454089401, 129.1326448135078],
            crs: L.CRS.EPSG3857,
            zoom: 11,
            zoomControl: true,
            preferCanvas: false,
        });

        tile_layer = L.tileLayer(
            "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
            {"attribution": "Data by \u0026copy; \u003ca href=\"http://openstreetmap.org\"\u003eOpenStreetMap\u003c/a\u003e, under \u003ca href=\"http://www.openstreetmap.org/copyright\"\u003eODbL\u003c/a\u003e.", "detectRetina": false, "maxNativeZoom": 18, "maxZoom": 18, "minZoom": 0, "noWrap": false, "opacity": 1, "subdomains": "abc", "tms": false}
        ).addTo(map);

        for (let i = 0; i < tourzy_bike.length; i++) {

            // console.log(`${i} car:${tourzy_bike[i].car}, lat:${tourzy_bike[i].lat}, lng:${tourzy_bike[i].lng}`)

            // 시작
            marker = L.marker(
                [tourzy_bike[i].lat, tourzy_bike[i].lng],
                {}
            ).addTo(map);

            var icon_color = ''
            var icon_img = ''

            if (tourzy_bike[i].fuel <= 10) {

                icon_color = 'red'

            } else {

                icon_color = 'orange'
            }

            if (tourzy_bike[i].lock == '열림') {

                icon_img = 'ban-circle'

            } else {

                if (tourzy_bike[i].etc == 'GPS' || tourzy_bike[i].etc == '파손' || tourzy_bike[i].etc == '회수' || tourzy_bike[i].etc == '라이트') {

                    icon_img = 'plus-sign'

                } else if (tourzy_bike[i].etc == '이탈' || tourzy_bike[i].etc == '재배치') {

                    icon_img = 'refresh'
                    
                } else {

                    icon_img = 'flash'
                }
            }
        
            icon = L.AwesomeMarkers.icon(
                {"extraClasses": "fa-rotate-0", "icon": icon_img, "iconColor": "white", "markerColor": icon_color, "prefix": "glyphicon"}
            );
            marker.setIcon(icon);
        
            popup = L.popup({"maxWidth": "100%"});
            html = $(`<div id="html" onclick="copy('${tourzy_bike[i].address.replace("대한민국 ", "")}', '${tourzy_bike[i].car}')"; style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].car}<br /><div id="html" style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].fuel}%</div><br /><div id="html" style="width: 100.0%; height: 100.0%;">${tourzy_bike[i].etc}</div></div>`)[0];
            popup.setContent(html);
            
            marker.bindPopup(popup);
            // 끝
        }
    }

    window.onload = function () {
        
        mapLoad ()
    }

</script>

<body>

    <div id="copied">주소가 복사되었습니다.</div>

    <div id="updated">UPDATED 2023.08.07. 16:00 총 69대
        <br/>
        금지 - 잠금 열린 차량 (1대)
        <br/>
        플러스 - 회수 후 정비가 필요한 차량 (5대)
        <br/>
        리프레쉬 - 재배치가 필요한 차량 (22대)
        <br/>
        번개 - 배터리 부족 빨간색 10% 이하, 주황색 10% 이상 20% 이하 (41대)
    </div>
    
    <div class="folium-map" id="map"></div>
        
</body>

</html>